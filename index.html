<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Sistem Chat Data Terstruktur Lokal</title>
    <link rel="stylesheet" href="styles.css">
    <link rel="icon" href="data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22><text y=%22.9em%22 font-size=%2290%22>ğŸ“Š</text></svg>">
</head>
<body>
    <div id="loading-overlay" class="loading-overlay" style="display: none;">
        <div class="loading-spinner"></div>
        <p>Memproses permintaan...</p>
    </div>

    <header id="main-header" class="header">
        <div class="container header-container">
            <div class="nav-brand">
                <h1>Data Chat Lokal</h1>
                <span class="subtitle">Analisis Data Terstruktur Berbasis AI</span>
            </div>
        </div>
    </header>

    <main class="main-container">
        <div id="dashboard-section" class="dashboard-section active">
            <div class="container dashboard-container">
                <nav class="sidebar" aria-label="Main navigation">
                    <ul class="sidebar-menu">
                        <li><a href="#" id="nav-upload-structured" class="nav-link active" aria-current="page">Unggah Data</a></li>
                        <li><a href="#" id="nav-structured-documents" class="nav-link">Daftar Data</a></li>
                        <li><a href="#" id="nav-chat" class="nav-link">Chat AI</a></li>
                        <li><a href="#" id="nav-history" class="nav-link">Riwayat</a></li>
                        <li><a href="#" id="nav-faq" class="nav-link">FAQ</a></li>
                        <li>
                            <button class="btn btn-danger btn-small" id="clear-all-data-btn" style="width: 100%; margin-top: 20px;">Hapus Semua Data</button>
                        </li>
                    </ul>
                </nav>

                <div class="content-area">
                    <section id="upload-structured-section" class="content-section active" aria-labelledby="upload-structured-heading">
                        <h2 id="upload-structured-heading">Unggah Data Terstruktur</h2>
                        <div class="upload-container">
                            <form id="upload-structured-form" class="upload-form">
                                <div class="upload-area" id="upload-structured-area" role="button" tabindex="0" aria-label="Area unggah file data terstruktur: Klik atau seret file ke sini">
                                    <div class="upload-icon" aria-hidden="true">ğŸ“Š</div>
                                    <p>Seret &amp; letakkan file di sini, atau klik untuk memilih</p>
                                    <p class="upload-help">Format: XLSX, XLS, CSV (Hanya 1 file, maks. 10MB)</p>
                                    <input type="file" id="structured-file-input" accept=".xlsx,.xls,.csv" hidden>
                                </div>
                                <div id="structured-file-list" class="file-list" aria-live="polite"></div>
                                <button type="submit" id="upload-structured-btn" class="btn btn-primary" disabled>Unggah Data</button>
                            </form>
                        </div>
                    </section>

                    <section id="structured-documents-section" class="content-section" aria-labelledby="structured-documents-heading">
                        <h2 id="structured-documents-heading">Daftar Data Terstruktur</h2>
                        <div id="structured-documents-container" class="documents-container"></div>
                    </section>

                    <section id="chat-section" class="content-section" aria-labelledby="chat-heading">
                        <h2 id="chat-heading">Chat AI dengan Data</h2>
                        <div class="chat-container">
                            <div class="chat-sidebar">
                                <div class="chat-documents-selector">
                                    <h3>Pilih Data untuk Chat</h3>
                                    <div id="chat-structured-document-list" class="chat-document-list"></div>
                                </div>
                                <div id="predefined-questions" class="predefined-questions" style="display: none;">
                                    <h3>Saran Pertanyaan</h3>
                                    <div id="questions-list" class="questions-list"></div>
                                </div>
                            </div>

                            <div class="chat-area">
                                <div id="chat-messages" class="chat-messages" aria-live="polite"></div>
                                <div class="chat-input-container">
                                    <form id="chat-form" class="chat-form">
                                        <input type="text" id="chat-input" placeholder="Ketik pertanyaan Anda..." disabled autocomplete="off" aria-label="Input pertanyaan chat">
                                        <button type="submit" id="chat-send-btn" class="btn btn-primary" disabled>Kirim</button>
                                    </form>
                                </div>
                            </div>
                        </div>
                    </section>

                    <section id="history-section" class="content-section" aria-labelledby="history-heading">
                        <h2 id="history-heading">Riwayat Chat</h2>
                        <div id="history-container" class="history-container"></div>
                    </section>

                    <section id="faq-section" class="content-section" aria-labelledby="faq-heading">
                        <h2 id="faq-heading">Pertanyaan Umum (FAQ)</h2>
                        <div class="faq-container">
                            <div class="faq-item">
                                <button class="faq-question">Apa itu Sistem Chat Data Terstruktur Lokal?</button>
                                <div class="faq-answer">
                                    <p>Ini adalah sebuah platform lokal yang memungkinkan Anda mengunggah file data terstruktur (seperti Excel atau CSV) dan berinteraksi dengan data tersebut menggunakan teknologi AI. Anda bisa bertanya tentang isi data dan mendapatkan informasi atau ringkasan secara cepat.</p>
                                </div>
                            </div>
                            <div class="faq-item">
                                <button class="faq-question">Apakah sistem ini memerlukan akun?</button>
                                <div class="faq-answer">
                                    <p>Tidak, versi ini adalah sistem lokal tanpa otentikasi pengguna. Anda bisa langsung menggunakan semua fitur tanpa perlu login atau mendaftar.</p>
                                </div>
                            </div>
                            <div class="faq-item">
                                <button class="faq-question">Bagaimana cara menghapus semua data dan riwayat chat?</button>
                                <div class="faq-answer">
                                    <p>Anda bisa menggunakan tombol "Hapus Semua Data" di sidebar navigasi. Tindakan ini akan menghapus semua file data terstruktur yang diunggah dan riwayat chat yang tersimpan di sistem lokal Anda.</p>
                                </div>
                            </div>
                            <div class="faq-item">
                                <button class="faq-question">Format file apa saja yang didukung?</button>
                                <div class="faq-answer">
                                    <p>Sistem ini mendukung format file data terstruktur: <strong>XLSX</strong>, <strong>XLS</strong>, dan <strong>CSV</strong>. Anda dapat mengunggah <strong>1 file</strong> data terstruktur saja pada satu waktu, dengan ukuran maksimal <strong>10 MB</strong> per file.</p>
                                </div>
                            </div>
                            <div class="faq-item">
                                <button class="faq-question">Bagaimana cara kerja Chat AI dengan data terstruktur?</button>
                                <div class="faq-answer">
                                    <p>Ketika Anda chat dengan dokumen data terstruktur (Excel/CSV), pada pertanyaan <strong>pertama</strong>, AI akan mencoba mencari jawaban langsung dari data di dalam file tersebut. Jika Anda melanjutkan percakapan (chat <strong>kedua</strong> dan seterusnya) dengan dokumen data terstruktur yang sama, AI akan melakukan pencarian informasi dari <strong>internet</strong> untuk menjawab pertanyaan Anda, menggunakan pertanyaan terakhir Anda sebagai kueri pencarian.</p>
                                </div>
                            </div>
                            <div class="faq-item">
                                <button class="faq-question">Bagaimana jika AI memberikan jawaban yang salah?</button>
                                <div class="faq-answer">
                                    <p>AI adalah alat bantu dan bisa membuat kesalahan. Jawaban dari AI harus selalu Anda verifikasi kembali dengan sumber asli (data Anda). Jika Anda menemukan jawaban yang konsisten salah, coba ubah cara Anda bertanya menjadi lebih spesifik.</p>
                                </div>
                            </div>
                            <div class="faq-item">
                                <button class="faq-question">Model AI apa yang digunakan?</button>
                                <div class="faq-answer">
                                    <p>Sistem ini didukung oleh API dari <strong>Groq</strong> yang menjalankan model bahasa canggih <strong>Llama 3</strong>. Ini memungkinkan sistem memberikan respons yang sangat cepat dan berkualitas.</p>
                                </div>
                            </div>
                        </div>
                    </section>
                </div>
            </div>
        </div>
    </main>

    <div id="alert-container" class="alert-container" aria-live="assertive"></div>

    <div id="confirmation-modal" class="modal" style="display: none;" role="alertdialog" aria-modal="true" aria-labelledby="modal-title" aria-describedby="modal-message">
        <div class="modal-content">
            <h3 id="modal-title" class="modal-title-text">Konfirmasi</h3>
            <p id="modal-message" class="modal-message-text">Apakah Anda yakin?</p>
            <div class="modal-actions">
                <button id="modal-cancel" class="btn btn-secondary">Batal</button>
                <button id="modal-confirm" class="btn btn-danger">Ya, Lanjutkan</button>
            </div>
        </div>
    </div>

    <script src="script.js" defer></script>
</body>
</html>